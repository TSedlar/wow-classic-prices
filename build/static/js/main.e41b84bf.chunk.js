(this["webpackJsonpwow-classic-prices"]=this["webpackJsonpwow-classic-prices"]||[]).push([[0],{51:function(e,t){e.exports.moneyToGSC=function(e){var t=parseInt(Math.floor(e/1e3)),r=parseInt(Math.floor(e%1e3/100)),n=parseInt(Math.floor(e%1e3%100));return{gold:t,silver:r,copper:n,toString:function(){return"".concat(t,"g ").concat(r,"s ").concat(n,"c")}}}},56:function(e,t,r){e.exports=r(86)},61:function(e,t,r){},85:function(e,t,r){},86:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(7),c=r.n(o),s=(r(61),r(11)),i=r(123),u=r(124),l=r(50),f=r(121),h=r(25),p=r(9),m=r.n(p),v=r(14),g=r(122),b=r(44),d=r(45),w=r(41),O=r(66),j="https://api.nexushub.co/wow-classic/v1",E="".concat(j,"/items/%s-%s/%s"),x="".concat(j,"/servers/full"),y=("".concat(j,"/search?limit=%s&threshold=%s&query=%s"),"".concat(j,"/search/suggestions?limit=%s&query=%s")),S=["of Spirit","of Intellect","of Strength","of Stamina","of Agility","of Frozen Wrath","of Arcane Wrath","of Fiery Wrath","of Nature's Wrath","of Healing","of Shadow Wrath","of Fire Resistance","of Nature Resistance","of Arcane Resistance","of Frost Resistance","of Shadow Resistance","of Fire Protection","of Nature Protection","of Arcane Protection","of Frost Protection","of Shadow Protection","Of the Tiger","Of the Bear","Of the Gorilla","Of the Boar","Of the Monkey","Of the Falcon","Of the Wolf","Of the Eagle","Of the Whale","Of the Owl","of Striking","of Sorcery","of Regeneration","of Concentration","of Blocking","of Battle","of the Ancestor","of the Bandit","of the Beast","of the Champion","of the Crusade","of the Elder","of the Grove","of the Hunt","of the Hierophant","of the Invoker","of the Knight","of the Mind","of the Nightmare","of the Physician","of the Prophet","of the Shadow","of the Soldier","of the Sorcerer","of the Sun","of the Vision","of the Wild","of the Foreseer","of the Marksman","of the Necromancer","of the Squire","of the Thief","Of Defense","Of Power","Of Marksmanship","Of Eluding"],k=function(){function e(t,r){Object(b.a)(this,e),this.server=t,this.faction=r}return Object(d.a)(e,[{key:"fetchData",value:function(){var e=Object(v.a)(m.a.mark((function e(t){var r,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.format(E,this.server,this.faction,t),e.next=3,O(r);case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function C(){return(C=Object(v.a)(m.a.mark((function e(){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(x);case 2:return t=e.sent,e.next=5,t.json();case 5:return(r=e.sent).length||(r=[]),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return W.apply(this,arguments)}function W(){return(W=Object(v.a)(m.a.mark((function e(t){var r,n,a,o,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:10,n=w.format(y,r,t),e.next=4,O(n);case 4:return a=e.sent,e.next=7,a.json();case 7:return(o=e.sent).length||(o=[]),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=["Alliance","Horde"],P=r(67),A=r(68),F=r(81),M=A(function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,10,.4);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),6,1e3),B=A(function(){var e=Object(v.a)(m.a.mark((function e(t,r){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData(r.uniqueName);case 2:return n=e.sent,e.abrupt("return",T(n));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),3,1e3);function T(e){var t=-1,r=-1,n=-1;try{e.stats&&e.stats.current&&(e.stats.current.historicalValue&&(t=e.stats.current.historicalValue),e.stats.current.marketValue&&(r=e.stats.current.marketValue)),e.vendorPrice&&(n=e.vendorPrice)}catch(a){}return-1!==t&&"-1"!==t?t:-1!==r&&"-1"!==r?r:-1!==n&&"-1"!==n?n:"N/A"}function I(e,t){return e.server.toLowerCase()+"-"+e.faction.toLowerCase()+"-"+t.uniqueName}var q=function(e){var t=Object(n.useState)(null),r=Object(s.a)(t,2),o=r[0],c=r[1],i=Object(n.useState)(null),u=Object(s.a)(i,2),l=u[0],f=u[1],p=Object(n.useContext)(D),b=Object(s.a)(p,2),d=(b[0],b[1]),w=Object(n.useContext)(J),O=Object(s.a)(w,2),j=O[0],E=O[1];return Object(n.useEffect)((function(){if(!l&&e.server&&e.faction&&(console.log("Server: "+e.server),console.log("Faction: "+e.faction),f(new k(e.server,e.faction))),l&&e.server&&e.faction&&o&&o.length>=3){var t=function(){var e=Object(v.a)(m.a.mark((function e(){var t,r,n,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object(h.a)(c),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=24;break}if(n=r.value,a=I(l,n),j.prices.has(a)){e.next=20;break}return o=-1,e.prev=8,e.next=11,B(l,n);case 11:o=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),console.log("Aborted priceThrottle");case 17:-1!==o&&(j.prices.set(a,o),console.log("".concat(n.name," (").concat(a,") = ").concat(o))),e.next=21;break;case 20:console.log("price cached for ".concat(n.name," (").concat(j.prices.get(a),")"));case 21:E({prices:j.prices});case 22:e.next=3;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(1),t.e(e.t1);case 29:return e.prev=29,t.f(),e.finish(29);case 32:E({prices:j.prices});case 33:case"end":return e.stop()}}),e,null,[[1,26,29,32],[8,14]])})));return function(){return e.apply(this,arguments)}}();M.abort(),B.abort();var r,n=Object(h.a)(j.prices.keys());try{for(n.s();!(r=n.n()).done;){var a=r.value;-1===j.prices.get(a)&&j.prices.delete(a)}}catch(s){n.e(s)}finally{n.f()}E({prices:j.prices});var c=P.filter((function(e){return e.name.toLowerCase().includes(o.toLowerCase())||F.compareTwoStrings(e.name.toLowerCase(),o.toLowerCase())>=.65}));c.sort((function(e,t){var r=F.compareTwoStrings(e.name.toLowerCase(),o.toLowerCase());return F.compareTwoStrings(t.name.toLowerCase(),o.toLowerCase())-r})),c=c.slice(0,Math.min(c.length,10)),d({items:c}),t()}else d({items:[]}),E({prices:j.prices})}),[o]),a.a.createElement(g.a,{label:"Query",variant:"outlined",onChange:function(e){c(function(e){var t,r=Object(h.a)(S);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.toLowerCase().endsWith(n.toLowerCase())&&(e=(e=e.substring(0,e.length-n.length)).replace(/\s\s+/g," "))}}catch(a){r.e(a)}finally{r.f()}return e}(e.target.value))}})},R=r(51),V=(r(85),r(41)),G={items:[]},H={prices:new Map},D=Object(n.createContext)(G),J=Object(n.createContext)(H),z=function(e){var t=e.children,r=Object(n.useState)(G),o=Object(s.a)(r,2),c=o[0],i=o[1],u=Object(n.useState)(H),l=Object(s.a)(u,2),f=l[0],h=l[1];return a.a.createElement(D.Provider,{value:[c,i]},a.a.createElement(J.Provider,{value:[f,h]},t))},K=Object(f.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},margin:{margin:e.spacing(1)}}}));function Q(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),r=t[0],o=t[1],c=Object(n.useState)(null),f=Object(s.a)(c,2),h=f[0],p=f[1],m=Object(n.useState)(L[0]),v=Object(s.a)(m,2),g=v[0],b=v[1],d=Object(n.useContext)(D),w=Object(s.a)(d,1)[0],O=Object(n.useContext)(J),j=Object(s.a)(O,1)[0];function E(e){var t="?",r=function(e){return h&&g?h.toLowerCase()+"-"+g.toLowerCase()+"-"+e.uniqueName:null}(e);if(j.prices.has(r)){var n=j.prices.get(r);-1!==n&&(t=n)}return-1!==t&&"?"!==t&&"N/A"!==t&&(t=Object(R.moneyToGSC)(parseInt(t)).toString()),t}Object(n.useEffect)((function(){(function(){return C.apply(this,arguments)})().then((function(e){o(e),p(e[0].slug)}))}),[]);var x=K();return a.a.createElement("div",null,a.a.createElement("div",{className:x.root},h&&a.a.createElement(i.a,{fullWidth:!0,className:x.margin},a.a.createElement(u.a,null,"Server"),a.a.createElement(l.a,{value:h.slug,onChange:function(e){return p(e.target.value)}},r.map((function(e){return a.a.createElement("option",{key:e.slug,value:e.slug},e.name)})))),a.a.createElement(i.a,{fullWidth:!0,className:x.margin},a.a.createElement(u.a,null,"Faction"),a.a.createElement(l.a,{onChange:function(e){return b(e.target.value)}},L.map((function(e){return a.a.createElement("option",{key:e,value:e},e)})))),a.a.createElement(i.a,{fullWidth:!0,className:x.margin},a.a.createElement(q,{server:h,faction:g}))),a.a.createElement("div",{className:"item-table"},w.items.map((function(e){return a.a.createElement("div",{className:"search-item row"},a.a.createElement("div",{className:"column left"},a.a.createElement("img",{src:V.format("https://render-classic-us.worldofwarcraft.com/icons/56/%s.jpg",e.icon)})),a.a.createElement("div",{className:"column middle"},a.a.createElement("span",null,e.name)),a.a.createElement("div",{className:"column right"},a.a.createElement("span",null,E(e))))}))))}var $=function(){return a.a.createElement(z,null,a.a.createElement("div",{className:"App"},a.a.createElement(Q,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[56,1,2]]]);
//# sourceMappingURL=main.e41b84bf.chunk.js.map